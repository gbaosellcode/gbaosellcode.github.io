<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghi nhận phát biểu</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        h2 { color: #333; }
        select, input, button { margin: 10px; padding: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #f4f4f4; }
    </style>
</head>
<body>
    <h2>Ghi nhận số lần phát biểu</h2>
    <label for="student">Chọn học sinh:</label>
    <select id="student"></select>
    <label for="times">Số lần phát biểu:</label>
    <input type="number" id="times" min="1" value="1">
    <button onclick="addPoints()">Ghi nhận</button>
    
    <h2>DANH SÁCH ĐIỂM TỔ 2</h2>
    <table>
        <thead>
            <tr>
                <th>Họ và tên</th>
                <th>Điểm cộng</th>
            </tr>
        </thead>
        <tbody id="scoreboard"></tbody>
    </table>
    
    <button onclick="resetScores()">Reset điểm</button>
    
    <script>
        // Cấu hình Firebase (Thay bằng thông tin dự án của bạn)
        const firebaseConfig = {
            apiKey: "AIzaSyBkwtE5fgpqGfVKZz3axS4cOp_fmypA0Gs",
            authDomain: "gbao-fb83c.firebaseapp.com",
            projectId: "gbao-fb83c",
            storageBucket: "gbao-fb83c.firebasestorage.app",
            messagingSenderId: "839152269169",
            appId: "1:839152269169:web:1221bd79ff5eed103ba8d0"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        const students = [
            "Gia Bảo", "Quốc Minh", "Mẩn Nhi", "Mỹ Ngọc", "Thanh Hiền", 
            "Tấn Bảo", "Ngọc Hân", "Tấn Phát", "Kim Ngân"
        ];
        
        let scores = {};
        
        function initialize() {
            const studentSelect = document.getElementById("student");
            students.forEach(name => {
                let option = document.createElement("option");
                option.value = name;
                option.textContent = name;
                studentSelect.appendChild(option);
            });
            fetchScores();
        }
        
        function fetchScores() {
            database.ref("scores").once("value", snapshot => {
                scores = snapshot.val() || {};
                students.forEach(name => {
                    if (!(name in scores)) scores[name] = 0;
                });
                updateScoreboard();
            });
        }
        
        function addPoints() {
            let student = document.getElementById("student").value;
            let times = parseInt(document.getElementById("times").value) || 0;
            scores[student] += times * 3 + 6; // Cộng điểm phát biểu và thêm 6 điểm
            database.ref("scores").set(scores);
            updateScoreboard();
        }
        
        function updateScoreboard() {
            let scoreboard = document.getElementById("scoreboard");
            scoreboard.innerHTML = "";
            Object.keys(scores).forEach(student => {
                let row = document.createElement("tr");
                row.innerHTML = `<td>${student}</td><td>${scores[student]}</td>`;
                scoreboard.appendChild(row);
            });
        }
        
        function resetScores() {
            let password = prompt("Nhập mật khẩu để reset điểm:");
            if (password === "09092009") {
                scores = {};
                students.forEach(name => scores[name] = 0);
                database.ref("scores").set(scores);
                updateScoreboard();
                alert("Đã reset điểm thành công!");
            } else {
                alert("Mật khẩu không đúng!");
            }
        }
        
        initialize();
    </script>
</body>
</html>
